@import "tailwindcss";

html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

body {
  font-family: "Inter", sans-serif;
}

@keyframes marquee-left {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

@keyframes marquee-right {
  from {
    transform: translateX(-50%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes city-scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-1 * var(--city-width, 800px)));
  }
}

/* ═══════════════════════════════════════════════════════════════
   CityScene — CSS animations (replaces per-element Framer Motion)
   ═══════════════════════════════════════════════════════════════ */

@keyframes star-twinkle {
  0% { opacity: 0; }
  25% { opacity: 0.9; }
  50% { opacity: 0.25; }
  75% { opacity: 0.9; }
  100% { opacity: 0; }
}

@keyframes win-pulse {
  /* Very short dim rest */
  0%, 5% { opacity: var(--min-opacity, 0.2); }
  /* Fast rise to bright */
  15% { opacity: var(--max-opacity, 0.85); }
  /* Long bright plateau (30%) */
  45% { opacity: var(--max-opacity, 0.85); }
  /* Fade to dim */
  60% { opacity: var(--min-opacity, 0.2); }
  /* Dim rest until next cycle */
  100% { opacity: var(--min-opacity, 0.2); }
}

@keyframes win-fade-in {
  from { opacity: 0; }
  to { opacity: var(--min-opacity, 0.2); }
}

/* Layer & moon fade-in transitions */
.city-layer {
  opacity: 0;
  transition: opacity 0.7s ease-out;
}

.city-moon {
  opacity: 0;
  transition: opacity 0.7s ease-out 0.8s;
}

/* Animations paused until reveal */
.city-scene .star-twinkle,
.city-scene .win-pulse,
.city-scene .city-scroll-layer {
  animation-play-state: paused !important;
}

/* Fade-in: hasFadedIn adds .faded-in → permanent opacity + start animations */
.city-scene.faded-in .city-layer,
.city-scene.faded-in .city-moon {
  opacity: 1;
}

.city-scene.faded-in .star-twinkle,
.city-scene.faded-in .win-pulse,
.city-scene.faded-in .city-scroll-layer {
  animation-play-state: running !important;
}

/* ═══════════════════════════════════════════════════════════════
   Glow flash + punch + breathing — tagline keyword effects
   Activated by .tagline-glow.glow-active on the <p> container.
   Each keyword gets: (1) scale punch, (2) text-shadow flash,
   (3) infinite filter breathing. CSS delays (0.4s / 1s / 1.6s)
   are offset from JS blur-reveal segments (0 / 0.6s / 1.2s)
   so the glow fires mid-reveal.
   ═══════════════════════════════════════════════════════════════ */

@keyframes glow-flash {
  0%   { text-shadow: 0 0 0 transparent; }
  40%  { text-shadow: 0 0 12px rgba(34, 211, 238, 0.6),
                      0 0 24px rgba(34, 211, 238, 0.3); }
  100% { text-shadow: 0 0 0 transparent; }
}

@keyframes keyword-punch {
  0%   { transform: scale(1); }
  50%  { transform: scale(1.08); }
  100% { transform: scale(1); }
}

@keyframes glow-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 4px rgba(34, 211, 238, 0.4))
            drop-shadow(0 0 12px rgba(34, 211, 238, 0.2))
            drop-shadow(0 0 24px rgba(34, 211, 238, 0.1));
  }
  50% {
    filter: drop-shadow(0 0 6px rgba(34, 211, 238, 0.5))
            drop-shadow(0 0 16px rgba(34, 211, 238, 0.3))
            drop-shadow(0 0 32px rgba(34, 211, 238, 0.15));
  }
}

/* Staggered punch + flash + breathing per keyword (synced with blur-reveal segments) */
.tagline-glow.glow-active > span:nth-of-type(1) > .glow-pulse {
  animation: keyword-punch 0.35s ease-out 0.4s 1 both,
             glow-flash 1.2s ease-out 0.4s 1 both,
             glow-pulse 4s ease-in-out 2.5s infinite both;
}
.tagline-glow.glow-active > span:nth-of-type(2) > .glow-pulse {
  animation: keyword-punch 0.35s ease-out 1s 1 both,
             glow-flash 1.2s ease-out 1s 1 both,
             glow-pulse 4.7s ease-in-out 2.5s infinite both;
}
.tagline-glow.glow-active > span:nth-of-type(3) > .glow-pulse {
  animation: keyword-punch 0.35s ease-out 1.6s 1 both,
             glow-flash 1.2s ease-out 1.6s 1 both,
             glow-pulse 5.2s ease-in-out 3s infinite both;
}

/* ─── Reduced motion ─── */
@media (prefers-reduced-motion: reduce) {
  .star-twinkle {
    animation: none !important;
    opacity: 0.7 !important;
  }

  .win-pulse {
    animation: none !important;
    opacity: 0.6 !important;
  }

  .city-layer,
  .city-moon {
    opacity: 1 !important;
    transition: none !important;
  }

  .city-scroll-layer {
    animation: none !important;
  }

  .glow-pulse {
    animation: none !important;
    filter: drop-shadow(0 0 4px rgba(34, 211, 238, 0.4))
            drop-shadow(0 0 12px rgba(34, 211, 238, 0.2))
            drop-shadow(0 0 24px rgba(34, 211, 238, 0.1));
  }

  .marquee-track {
    animation: none !important;
  }
}
