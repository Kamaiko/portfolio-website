@import "tailwindcss";

html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

body {
  font-family: "Inter", sans-serif;
}

@keyframes marquee-left {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

@keyframes marquee-right {
  from {
    transform: translateX(-50%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes city-scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-800px); /* W from src/data/city-scene.ts */
  }
}

/* ═══════════════════════════════════════════════════════════════
   CityScene — CSS animations (replaces per-element Framer Motion)
   ═══════════════════════════════════════════════════════════════ */

@keyframes star-twinkle {
  0% { opacity: 0; }
  25% { opacity: 0.9; }
  50% { opacity: 0.25; }
  75% { opacity: 0.9; }
  100% { opacity: 0; }
}

@keyframes win-pulse {
  /* Short pause at dim */
  0%, 10% { opacity: var(--min-opacity, 0.2); }
  /* Fade to bright */
  25% { opacity: var(--max-opacity, 0.85); }
  /* Longer pause at bright (30% of cycle) */
  55% { opacity: var(--max-opacity, 0.85); }
  /* Fade to dim */
  70% { opacity: var(--min-opacity, 0.2); }
  /* Rest at dim (30% of cycle) */
  100% { opacity: var(--min-opacity, 0.2); }
}

@keyframes win-fade-in {
  from { opacity: 0; }
  to { opacity: var(--min-opacity, 0.2); }
}

/* Layer & moon fade-in transitions */
.city-layer {
  opacity: 0;
  transition: opacity 0.7s ease-out;
}

.city-moon {
  opacity: 0;
  transition: opacity 0.7s ease-out 0.8s;
}

/* Animations paused until reveal */
.city-scene .star-twinkle,
.city-scene .win-pulse,
.city-scene .city-scroll-layer {
  animation-play-state: paused !important;
}

/* Fade-in: hasFadedIn adds .faded-in → permanent opacity + start animations */
.city-scene.faded-in .city-layer,
.city-scene.faded-in .city-moon {
  opacity: 1;
}

.city-scene.faded-in .star-twinkle,
.city-scene.faded-in .win-pulse,
.city-scene.faded-in .city-scroll-layer {
  animation-play-state: running !important;
}

/* ─── Reduced motion ─── */
@media (prefers-reduced-motion: reduce) {
  .star-twinkle {
    animation: none !important;
    opacity: 0.7 !important;
  }

  .win-pulse {
    animation: none !important;
    opacity: 0.6 !important;
  }

  .city-layer,
  .city-moon {
    opacity: 1 !important;
    transition: none !important;
  }

  .city-scroll-layer {
    animation: none !important;
  }
}
