@import "tailwindcss";

html.lenis,
html.lenis body {
  height: auto;
}

.lenis.lenis-smooth {
  scroll-behavior: auto !important;
}

.lenis.lenis-smooth [data-lenis-prevent] {
  overscroll-behavior: contain;
}

body {
  font-family: "Inter", sans-serif;
}

@keyframes marquee-left {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(-50%);
  }
}

@keyframes marquee-right {
  from {
    transform: translateX(-50%);
  }
  to {
    transform: translateX(0);
  }
}

@keyframes city-scroll {
  from {
    transform: translateX(0);
  }
  to {
    transform: translateX(calc(-1 * var(--city-width, 800px)));
  }
}

/* ═══════════════════════════════════════════════════════════════
   CityScene — CSS animations (replaces per-element Framer Motion)
   ═══════════════════════════════════════════════════════════════ */

@keyframes star-twinkle {
  0% { opacity: 0; }
  25% { opacity: 0.9; }
  50% { opacity: 0.25; }
  75% { opacity: 0.9; }
  100% { opacity: 0; }
}

@keyframes win-pulse {
  /* Very short dim rest */
  0%, 5% { opacity: var(--min-opacity, 0.2); }
  /* Fast rise to bright */
  15% { opacity: var(--max-opacity, 0.85); }
  /* Long bright plateau (30%) */
  45% { opacity: var(--max-opacity, 0.85); }
  /* Fade to dim */
  60% { opacity: var(--min-opacity, 0.2); }
  /* Dim rest until next cycle */
  100% { opacity: var(--min-opacity, 0.2); }
}

@keyframes win-fade-in {
  from { opacity: 0; }
  to { opacity: var(--min-opacity, 0.2); }
}

/* Layer & moon fade-in transitions */
.city-layer {
  opacity: 0;
  transition: opacity 0.7s ease-out;
}

.city-moon {
  opacity: 0;
  transition: opacity 0.7s ease-out 0.8s;
}

/* Animations paused until reveal */
.city-scene .star-twinkle,
.city-scene .win-pulse,
.city-scene .city-scroll-layer {
  animation-play-state: paused !important;
}

/* Fade-in: hasFadedIn adds .faded-in → permanent opacity + start animations */
.city-scene.faded-in .city-layer,
.city-scene.faded-in .city-moon {
  opacity: 1;
}

.city-scene.faded-in .star-twinkle,
.city-scene.faded-in .win-pulse,
.city-scene.faded-in .city-scroll-layer {
  animation-play-state: running !important;
}

/* ═══════════════════════════════════════════════════════════════
   Glow pulse — breathing highlight effect for tagline keywords
   Activated by .tagline-glow.glow-active on the parent container.
   Each word breathes at a unique rhythm (4s / 4.7s).
   ═══════════════════════════════════════════════════════════════ */

@keyframes glow-pulse {
  0%, 100% {
    filter: drop-shadow(0 0 4px rgba(34, 211, 238, 0.4))
            drop-shadow(0 0 12px rgba(34, 211, 238, 0.2))
            drop-shadow(0 0 24px rgba(34, 211, 238, 0.1));
  }
  50% {
    filter: drop-shadow(0 0 6px rgba(34, 211, 238, 0.5))
            drop-shadow(0 0 16px rgba(34, 211, 238, 0.3))
            drop-shadow(0 0 32px rgba(34, 211, 238, 0.15));
  }
}

/* Staggered breathing — scoped to tagline */
.tagline-glow.glow-active .glow-pulse:nth-of-type(1) {
  animation: glow-pulse 4s ease-in-out 0.6s infinite both;
}
.tagline-glow.glow-active .glow-pulse:nth-of-type(2) {
  animation: glow-pulse 4.7s ease-in-out 0.72s infinite both;
}

/* ─── Reduced motion ─── */
@media (prefers-reduced-motion: reduce) {
  .star-twinkle {
    animation: none !important;
    opacity: 0.7 !important;
  }

  .win-pulse {
    animation: none !important;
    opacity: 0.6 !important;
  }

  .city-layer,
  .city-moon {
    opacity: 1 !important;
    transition: none !important;
  }

  .city-scroll-layer {
    animation: none !important;
  }

  .glow-pulse {
    animation: none !important;
    filter: drop-shadow(0 0 4px rgba(34, 211, 238, 0.4))
            drop-shadow(0 0 12px rgba(34, 211, 238, 0.2))
            drop-shadow(0 0 24px rgba(34, 211, 238, 0.1));
  }

  .marquee-track {
    animation: none !important;
  }
}
